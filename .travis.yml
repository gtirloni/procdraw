sudo: required
dist: trusty
language: cpp
compiler: gcc
env:
  - ENABLE_ALSA_MIDI=OFF
  - ENABLE_ALSA_MIDI=ON
before_install:
  - sudo apt-get -qq update
  - sudo apt-get -qq install jing
  - sudo apt-get -qq install libsdl2-dev
  - if [ $ENABLE_ALSA_MIDI = ON ] ; then sudo apt-get -qq install libasound2-dev ; fi
  - cmake --version
install:
  - nvm install --lts
script: >
  node --version
  && npm --version
  && make lint
  && mkdir build
  && cd build
  && cmake -DENABLE_ALSA_MIDI=$ENABLE_ALSA_MIDI ..
  && make
  && make check
